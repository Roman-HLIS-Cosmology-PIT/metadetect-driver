# metadetect-driver

Driver to interface metadetection and Roman Space Telescope coadd images generated by PyIMCOM.

The basic functionality of the driver is to take PyIMCOM images, and more specifically PyIMCOM object that know how to read the images, and run Metadetection on those images to produce catalogs with photometry and shape information.
The code can process single PyIMCOM Blocks (which hold single coadded images).

## Installation

```bash
pip install git+https://github.com/Roman-HLIS-Cosmology-PIT/metadetect-driver.git
```

For development, you might want to run this instead:
```bash
git clone https://github.com/Roman-HLIS-Cosmology-PIT/metadetect-driver.git
cd metadetect-driver
pip install -e .
```

## Dependencies

The primary dependencies of the code are the `metadetect` "stack" (i.e., `metadetect`, `ngmix`, `meds`, etc.) and `pyimcom`.
The former is best-installed via conda, and the latter can be installed from GitHub via pip.
An example file for conda requirements is provided to facilitate building an environment:
```bash
conda install --file requirements-conda.txt
```

## Use

The `MetadetectRunner` class provides an interface for running metadetect on IMCOM `OutImage`s.
For a list of `OutImage`s corresponding to the same field in different bands, the interface is simply
```python
results = metadetect_driver.run_metadetect(outimages)
```
